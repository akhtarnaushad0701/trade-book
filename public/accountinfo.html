
<!DOCTYPE HTML>
<html lang="en">  
<head>
    <meta charset="UTF-8">
    <title>Purchase List</title>
    <!-- Google Fonts & Icons -->
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" href="./menuHeader.css">

    <style>
      
        /* Main wrapper */
        .mainDiv {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        /* Heading */
        .mainDiv h1 {
            font-size: 30px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            text-align: center;
        }
		
		.topform-grid {
			display: grid;
			grid-template-columns: repeat(3, 1fr); /* 3 equal columns */
			gap: 15px; /* space between columns */
			margin: 10px;
			justify-content: center;
			align-items: center;  
		}
		
.message {
        text-align: center;
		align-items: center; 
        font-size: 15px;
        margin-bottom: 15px;
       
		height:25px;
        border-radius: 8px;
        color: red;
		width:100%;
		font-weight:bold;
		 
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
    }
        /* Search bar */
        .search-bar {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 15px;
        }

        .search-bar input {
            padding: 5px 7px;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 250px;
            font-size: 14px;
            transition: 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.2);
        }

        /* Table container */
        .divContainer {
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
			  width: 100%;
           height: 380px;
            overflow-x: auto;
            overflow-y: auto;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
			
			
			
            margin-left: auto;
			margin-right: auto;
           
            
            white-space: nowrap;
			
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
			
  margin-left: auto;
  margin-right: auto;

        }

        thead {
			font-weight: bold;
			position: sticky;
			top: 0;
            background: #007bff;
            color: white;
        }

        th, td {
           
            text-align: center;
			padding-left: 10px;
			padding-right: 10px;
			padding: 5px 5px;
        }

        th {
			 
            font-weight: 600;
            text-transform: uppercase;
            font-size: 13px;
			 padding: 5px 5px;
			
        }

        tbody tr {
            border-bottom: 1px solid #e9ecef;
        }

        tbody tr:nth-child(even) {
            background-color: #f9fbfd;
        }

        tbody tr:hover {
            background-color: #eef5ff;
            transition: 0.2s;
        }
		 tr.selected {
        background-color: #074e5a !important;
		color: white;
		font-weight: bold;
		}
.form-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr); /* 6 equal columns */
  gap: 15px; /* space between columns */
  margin: 10px;
  justify-content: center;
  align-items: center;  
   
}

.thirdgrid {
  grid-column: 3;   /* explicitly put in 6th column */
}
.fourthgrid {
  grid-column: 4;   /* explicitly put in 6th column */
}

        /* Action buttons */
        .btn-icon {
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            margin: 0 4px;
            padding: 6px;
            border-radius: 6px;
            transition: 0.3s;
        }

        .btn-edit {
			 border: 2px solid rgba(13,110,253,0.1);
		
            color: #0d6efd;
        }

        .btn-edit:hover {
            background: rgba(13,110,253,0.1);
        }

        .btn-delete {
			 border: 2px solid rgba(220,53,69,0.1);
            color: #dc3545;
        }

        .btn-delete:hover {
            background: rgba(220,53,69,0.1);
        }

        /* Form buttons */
        input[type="submit"],
        input[type="reset"] {
            background: #0d6efd;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            margin: 20px 5px 0 0;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        input[type="submit"]:hover,
        input[type="reset"]:hover {
            background: #0b5ed7;
        }
    </style>
<script>
accID="";
function SelectRow(x) {
		
		
		//let table = document.getElementById("tblDuePmt");
		//alert(table.rows.length);
       deHighlight();
		accID=x.cells[0].innerText;
		
        x.classList.add("selected");
		document.getElementById("msg").innerHTML="";
    }
function UnSelectRow() {
	 deHighlight();
	 accID="";
	 document.getElementById("msg").innerHTML="";
}
	function deHighlight() {
		
        let table = document.getElementById("accountTable");
        if (!table) return;
        let rows = table.getElementsByTagName("tr");
        for (let i = 0; i < rows.length; i++) {
            rows[i].classList.remove("selected");
        }
    }
	
	function showForm(str)
	{
		if(accID=="")
		{
			document.getElementById("msg").innerHTML="Row is not selected.";
			return;
		}
		window.location.href='account.html?accID='+ accID+'&act='+str;
	}
 function GetAccType(x) {
	const AccTypes = ["","Business","Personal","Salary","Commission","Over Head","Transport","Miscellaneous"];
  
  return AccTypes[x];
}
async function fillTable() {
    try {
    const res = await fetch('/api/account');
    const data = await res.json();
    const tbody = document.getElementById('t-Body');

    
    tbody.innerHTML = ''; // clear old data

    data.forEach(row => {
        const tr = document.createElement('tr');
            tr.setAttribute("onclick", "SelectRow(this)");
            tr.innerHTML = `
            <td style='display: none'>${row.accID}</td>
            <td style='text-align:left'>${row.accName}</td>
            <td style='text-align:left'>${GetAccType(row.accType)}</td>
            
            <td style='text-align:left'>${row.Remark}</td>
            `;
            tbody.appendChild(tr);
    });
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}
 function codeAddress() {
		fillTable();

}
window.onload = codeAddress;

  // Load menu.html
    fetch("/menu.html")
      .then(res => res.text())
      .then(html => { document.getElementById("menu").innerHTML = html; });
  </script>
</head>

<body>
<div id="menu"></div> <!-- menu.html will load here -->

<form id="accountinfoForm">

<div class="mainDiv">
    <h1>Account Information</h1>
 <div class="topform-grid">
    <!-- Search -->
    <div class="search-bar">
	
        <input type="text" id="searchInput" placeholder="Search supplier, product, remarks...">
    </div>
	
	 <div id="msg" class="message"></div>
</div>
    <div class="divContainer">
        <table id="accountTable">
            <thead>
                <tr onclick='UnSelectRow()'>
                    <th style='display: none'> ID </th>
                    <th> Account </th>
                    <th> Type </th>
                    <th> Remarks </th>
                </tr>
            </thead>
            <tbody id="t-Body">
                 <!--Table Containts should be loaded here -->
            </tbody>
        </table>
    </div>
	<div class="form-grid">
	
		<button type="button" class="btn-icon btn-edit thirdgrid"  onclick="showForm(1)"><i class="fa-solid fa-pen-to-square"></i>Edit</button>
		<button type="button" class="btn-icon btn-delete fourthgrid" onclick="showForm(2)"><i class="fa-solid fa-trash"></i>Delete</button>

	</div>
</div>
</form>
<script>
// Simple table search
    document.getElementById("searchInput").addEventListener("keyup", function () {
        let filter = this.value.toLowerCase();
        let rows = document.querySelectorAll("#accountTable tbody tr");

        rows.forEach(row => {
            let text = row.innerText.toLowerCase();
            row.style.display = text.includes(filter) ? "" : "none";
        });
    });
</script>

</body>
</html>
